from: std

translator:
  pfunction:
    kwargs:
      out_file:
        pget: "__import__('sys').stdout"


get_scope:
  def pfunction: |
    try:
      return this['__scope',]
    except KeyError:
      this['__scope',] = this['scope',]()
    return this['get_scope',]()


build:
  def pfunction: |
    Code = __import__('actl').code.Code
    this['code',] = Code(buff=list(this['tokenizer',].tokenize()), scope=this['get_scope',]())

    LinkerLayer = __import__('actl').project.LinkerLayer
    llayer = LinkerLayer(this['parser',])
    llayer.link()


run:
  def pfunction: |
    Code = __import__('actl').code.Code
    this['code',] = Code(buff=list(this['tokenizer',].tokenize()), scope=this['get_scope',]())

    LinkerLayer = __import__('actl').project.LinkerLayer
    llayer = LinkerLayer(this['parser',],
                         this['sexecutor',])
    llayer.link()


uinput:
  pfset: "lambda string: this.__setitem__(('buff',), string)"


out_file:
  pget:
    __import__('sys').stdout